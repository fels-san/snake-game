var y=Object.defineProperty;var b=(e,t,i)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var l=(e,t,i)=>b(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();class g{constructor(t,i,r=null,s=null){l(this,"element");l(this,"index");l(this,"next");l(this,"previous");this.element=t,this.element.classList.add("snake-block"),this.index=i,this.next=r,this.previous=s}}class E{constructor(){l(this,"head");l(this,"tail");l(this,"direction");l(this,"lastDirection");l(this,"blockIndices");this.head=null,this.tail=null,this.direction="left",this.lastDirection="left",this.blockIndices=new Set}prepend(t,i){const r=new g(t,i,this.head);return this.head&&(this.head.element.classList.remove("head"),this.head.previous=r),this.head=r,r.element.classList.add("head"),this.tail||(this.tail=r),this.blockIndices.add(i),this}append(t,i){const r=new g(t,i);return this.tail&&(this.tail.next=r),r.previous=this.tail,this.tail=r,this.head||(this.head=r,r.element.classList.add("head")),this.blockIndices.add(i),this}deleteTail(){if(!this.tail)return null;const t=this.tail;return t.element.classList.remove("snake-block"),t.element.classList.contains("head")&&t.element.classList.remove("head"),this.tail.previous?(this.tail=this.tail.previous,this.tail.next=null):(this.head=null,this.tail=null),this.blockIndices.delete(t.index),t}deleteHead(){if(!this.head)return null;const t=this.head;return t.element.classList.remove("snake-block"),t.element.classList.contains("head")&&t.element.classList.remove("head"),this.head.next?(this.head=this.head.next,this.head.previous=null):(this.head=null,this.tail=null),this.blockIndices.delete(t.index),t}delete(){for(;this.head;)this.deleteTail();return this}}const T=document.querySelector(".game-board"),O=document.querySelector(".score"),S=document.querySelector(".high-score"),x=document.querySelector(".time"),L=document.querySelector(".end-screen"),q=document.querySelector(".start-screen"),B=document.querySelector(".restart-btn"),D=document.querySelector(".start-btn"),c=12,H=13,m=c*H,M=200;let a=[],h=[],d,k,I,p=!1;for(let e=1;e<=m;e++){const t=document.createElement("div");T.appendChild(t),a.push(t)}function v(){q.classList.add("hide"),p=!1,d=0,localStorage.getItem("score")||localStorage.setItem("score","0"),S.innerText=`High score: ${localStorage.getItem("score")}`,x.innerText="00:00:00",C(),u.reposition(),k=setInterval(()=>{N()},M),$()}class A{constructor(){l(this,"element",null);l(this,"index",0);this.reposition()}reposition(){var t;for(this.index=this.getRandomIndex();n.blockIndices.has(this.index);)this.index=this.getRandomIndex();(t=this.element)==null||t.classList.remove("apple"),this.element=a[this.index],this.element.classList.add("apple")}getRandomIndex(){return Math.floor(Math.random()*m)}}function R(){d++,O.innerText=`Score: ${d}`}function $(){let e=0;I=setInterval(()=>{e++,x.innerText=G(e)},1e3)}function G(e){let t=Math.floor(e/3600),i=Math.floor(e%3600/60);return e=e%60,`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}document.addEventListener("keydown",e=>{(e.key===" "||e.key==="Enter")&&p&&w();const t={up:"down",down:"up",left:"right",right:"left"};let i=e.key.slice(5).toLowerCase();n.direction!==t[i]&&h.push(i)});const n=new E;let u=new A;function N(){if(h.length>0){const i=h.shift();i&&(n.direction=i)}let e;switch(n.direction){case"up":e=n.head.index-c;break;case"down":e=n.head.index+c;break;case"left":e=n.head.index-1;break;case"right":e=n.head.index+1;break}if(P(e,n.direction)||n.blockIndices.has(e)){_();return}n.prepend(a[e],e);let t=n.deleteTail();n.head.index==u.index&&(u.reposition(),n.append(t.element,t.index),R())}function P(e,t){switch(t){case"up":return e<0;case"down":return e>=m;case"left":return(e+1)%c===0;case"right":return e%c===0;default:return!1}}function _(){p=!0,clearInterval(k),clearInterval(I),d>+localStorage.getItem("score")&&localStorage.setItem("score",d.toString()),S.innerText=`High score: ${localStorage.getItem("score")}`,L.classList.remove("hide")}function C(){let e=Math.floor(m/2)+2;n.append(a[e],e),n.append(a[e+1],e+1),n.append(a[e+2],e+2)}B.addEventListener("click",w);function w(){h=[],n.delete(),n.direction="left",u.reposition(),L.classList.add("hide"),v()}D.addEventListener("click",v);
