var k=Object.defineProperty;var w=(e,t,i)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var o=(e,t,i)=>w(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();class p{constructor(t,i,r=null,s=null){o(this,"element");o(this,"index");o(this,"next");o(this,"previous");this.element=t,this.element.classList.add("snake-block"),this.index=i,this.next=r,this.previous=s}}class b{constructor(){o(this,"head");o(this,"tail");o(this,"direction");o(this,"lastDirection");o(this,"blockIndices");this.head=null,this.tail=null,this.direction="left",this.lastDirection="left",this.blockIndices=new Set}prepend(t,i){const r=new p(t,i,this.head);return this.head&&(this.head.element.classList.remove("head"),this.head.previous=r),this.head=r,r.element.classList.add("head"),this.tail||(this.tail=r),this.blockIndices.add(i),this}append(t,i){const r=new p(t,i);return this.tail&&(this.tail.next=r),r.previous=this.tail,this.tail=r,this.head||(this.head=r,r.element.classList.add("head")),this.blockIndices.add(i),this}deleteTail(){if(!this.tail)return null;const t=this.tail;return t.element.classList.remove("snake-block"),t.element.classList.contains("head")&&t.element.classList.remove("head"),this.tail.previous?(this.tail=this.tail.previous,this.tail.next=null):(this.head=null,this.tail=null),this.blockIndices.delete(t.index),t}deleteHead(){if(!this.head)return null;const t=this.head;return t.element.classList.remove("snake-block"),t.element.classList.contains("head")&&t.element.classList.remove("head"),this.head.next?(this.head=this.head.next,this.head.previous=null):(this.head=null,this.tail=null),this.blockIndices.delete(t.index),t}delete(){for(;this.head;)this.deleteTail();return this}}const y=document.querySelector(".game-board"),T=document.querySelector(".score"),g=document.querySelector(".high-score"),S=document.querySelector(".time"),x=document.querySelector(".end-screen"),E=document.querySelector(".restart-btn"),c=12,O=13,m=c*O,D=200;let a=[],h=[],d,I,L;for(let e=1;e<=m;e++){const t=document.createElement("div");y.appendChild(t),a.push(t)}function v(){d=0,localStorage.getItem("score")||localStorage.setItem("score","0"),g.innerText=`High score: ${localStorage.getItem("score")}`,S.innerText="00:00:00",G(),u.reposition(),I=setInterval(()=>{A()},D),H()}class B{constructor(){o(this,"element",null);o(this,"index",0);this.reposition()}reposition(){var t;for(this.index=this.getRandomIndex();n.blockIndices.has(this.index);)this.index=this.getRandomIndex();(t=this.element)==null||t.classList.remove("apple"),this.element=a[this.index],this.element.classList.add("apple")}getRandomIndex(){return Math.floor(Math.random()*m)}}function q(){d++,T.innerText=`Score: ${d}`}function H(){let e=0;L=setInterval(()=>{e++,S.innerText=M(e)},1e3)}function M(e){let t=Math.floor(e/3600),i=Math.floor(e%3600/60);return e=e%60,`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}document.addEventListener("keydown",e=>{const t={up:"down",down:"up",left:"right",right:"left"};let i=e.key.slice(5).toLowerCase();n.direction!==t[i]&&h.push(i)});const n=new b;let u=new B;function A(){if(h.length>0){const i=h.shift();i&&(n.direction=i)}let e;switch(n.direction){case"up":e=n.head.index-c;break;case"down":e=n.head.index+c;break;case"left":e=n.head.index-1;break;case"right":e=n.head.index+1;break}if(R(e,n.direction)||n.blockIndices.has(e)){$();return}n.prepend(a[e],e);let t=n.deleteTail();n.head.index==u.index&&(u.reposition(),n.append(t.element,t.index),q())}function R(e,t){switch(t){case"up":return e<0;case"down":return e>=m;case"left":return(e+1)%c===0;case"right":return e%c===0;default:return!1}}function $(){clearInterval(I),clearInterval(L),d>+localStorage.getItem("score")&&localStorage.setItem("score",d.toString()),g.innerText=`High score: ${localStorage.getItem("score")}`,x.classList.remove("hide")}function G(){let e=Math.floor(m/2)+2;n.append(a[e],e),n.append(a[e+1],e+1),n.append(a[e+2],e+2)}E.addEventListener("click",N);function N(){h=[],n.delete(),n.direction="left",u.reposition(),x.classList.add("hide"),v()}v();
